<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Hanbok Heritage Quiz â€” í•œë³µ ì‹¬ë¦¬í…ŒìŠ¤íŠ¸</title>
  <meta name="description" content="1ë¶„ ì‹¬ë¦¬í…ŒìŠ¤íŠ¸ë¡œ ë‚˜ì˜ í•œë³µ ìŠ¤íƒ€ì¼ì„ ì°¾ì•„ë³´ì! #HanbokHeritage" />
  <meta property="og:title" content="Hanbok Heritage Quiz â€” í•œë³µ ì‹¬ë¦¬í…ŒìŠ¤íŠ¸" />
  <meta property="og:description" content="1ë¶„ ì‹¬ë¦¬í…ŒìŠ¤íŠ¸ë¡œ ë‚˜ì˜ í•œë³µ ìŠ¤íƒ€ì¼ì„ ì°¾ì•„ë³´ì! #HanbokHeritage" />
  <meta property="og:type" content="website" />
  <meta name="theme-color" content="#0ea5e9" />
  <style>
    :root{ --bg:#f8fafc; --card:#fff; --text:#0f172a; --muted:#64748b; --border:#e2e8f0; --accent:#0ea5e9; }
    *{box-sizing:border-box}
    body{margin:0; font-family:system-ui,-apple-system,Segoe UI,Roboto,Noto Sans KR,Apple SD Gothic Neo,sans-serif; background:linear-gradient(#fff,var(--bg)); color:var(--text)}
    .container{max-width:880px; margin:0 auto; padding:24px}
    header{display:flex; align-items:center; justify-content:space-between; gap:12px}
    .brand{display:flex; align-items:center; gap:8px}
    .badge{font-size:12px; color:var(--muted)}
    .card{background:var(--card); border:1px solid var(--border); border-radius:20px; box-shadow:0 6px 20px rgba(15,23,42,.05); padding:20px}
    .title{font-size:22px; font-weight:700; margin:8px 0 0}
    .intro{color:var(--muted); line-height:1.7}
    .btn{appearance:none; border:none; border-radius:16px; padding:12px 16px; background:var(--accent); color:#fff; font-weight:600; cursor:pointer; display:inline-flex; align-items:center; gap:8px}
    .btn.secondary{background:#e2e8f0; color:#0f172a}
    .btn:active{transform:translateY(1px)}
    .row{display:flex; flex-wrap:wrap; gap:10px}
    .choice{padding:16px; border:1px solid var(--border); border-radius:16px; background:#fff; cursor:pointer; text-align:left; flex:1 1 320px}
    .choice:hover{box-shadow:0 6px 14px rgba(15,23,42,.06)}
    .progress{height:10px; background:#e2e8f0; border-radius:999px; overflow:hidden; margin:8px 0}
    .bar{height:100%; background:var(--accent); width:0; transition:width .3s}
    .muted{color:var(--muted); font-size:14px}
    footer{margin:18px 0; text-align:center; color:var(--muted); font-size:12px}
    .list{margin:6px 0 0 18px; color:#334155}
    .result{border:1px solid var(--border); border-radius:20px; background:#fff; padding:18px}
    .result h3{margin:0; font-size:20px}
    .space{height:8px}
    .modal{position:fixed; inset:0; background:rgba(0,0,0,.4); display:none; align-items:center; justify-content:center; padding:20px}
    .modal.open{display:flex}
    .modal .sheet{background:#fff; border-radius:16px; padding:16px; max-width:560px; width:100%; border:1px solid var(--border)}
    .code{font-family:ui-monospace, SFMono-Regular, Menlo, Consolas, monospace; background:#f1f5f9; padding:10px; border-radius:8px; overflow:auto; white-space:pre-wrap}
  </style>
</head>
<body>
  <div class="container">
    <header>
      <div class="brand"><span>âœ¨</span><strong>Hanbok Heritage Quiz</strong></div>
      <div class="badge">ğŸ“± ëª¨ë°”ì¼ ì¹œí™”</div>
    </header>

    <div class="card" id="card"></div>

    <footer>Â© <span id="year"></span> Hanbok Heritage Quiz Â· ê°œì¸ì •ë³´ ìˆ˜ì§‘ ì—†ìŒ</footer>
  </div>

  <!-- Fallback copy modal (no Clipboard API needed) -->
  <div class="modal" id="copyModal" role="dialog" aria-modal="true" aria-labelledby="copyTitle">
    <div class="sheet">
      <h3 id="copyTitle" style="margin:0 0 8px 0">ë§í¬ë¥¼ ê¸¸ê²Œ ëˆŒëŸ¬ ë³µì‚¬í•˜ì„¸ìš”</h3>
      <p class="muted">ì¼ë¶€ í™˜ê²½(ìƒŒë“œë°•ìŠ¤/ì¸ì•± ë¸Œë¼ìš°ì €)ì—ì„œëŠ” í´ë¦½ë³´ë“œ ì ‘ê·¼ì´ ì œí•œë©ë‹ˆë‹¤.</p>
      <div class="code" id="copyText" contenteditable="true" spellcheck="false"></div>
      <div class="row" style="margin-top:12px; justify-content:flex-end">
        <button class="btn secondary" id="closeModal">ë‹«ê¸°</button>
      </div>
    </div>
  </div>

  <script>
    // ---- Data ----
    const QUESTIONS = [
      { id:1, title:"í•œë³µì„ ë– ì˜¬ë¦¬ë©´ ê°€ì¥ ë¨¼ì € ë“œëŠ” ëŠë‚Œì€?", choices:[
        { label:"ê³ ì „ì ì´ê³  ë‹¨ì•„í•¨", value:"classic" },
        { label:"ì¼ìƒì—ì„œë„ í¸í•˜ê²Œ", value:"daily" },
        { label:"ì˜ì‹ê³¼ ê²©ì‹, ìœ„ì—„", value:"ceremony" },
        { label:"ìš”ì¦˜ ê°ì„±, í™í•˜ê³  ììœ ë¡­ê²Œ", value:"fusion" },
      ]},
      { id:2, title:"ì£¼ë§ ì™¸ì¶œ ìŠ¤íƒ€ì¼ì€?", choices:[
        { label:"ê¶/ê³ íƒ ì‚°ì±…, ì‚¬ì§„ ë‚¨ê¸°ê¸°", value:"classic" },
        { label:"ì¹´í˜ íƒë°© + ê°€ë²¼ìš´ ì‚°ì±…", value:"daily" },
        { label:"ì „ì‹œ/ê³µì—°/êµ­ì•… ë“± ê²©ì‹ ìˆëŠ” ì¼ì •", value:"ceremony" },
        { label:"í˜ìŠ¤í‹°ë²Œ/ë²„ìŠ¤í‚¹/ìŠ¤íŠ¸ë¦¿", value:"fusion" },
      ]},
      { id:3, title:"ì„ í˜¸í•˜ëŠ” ìƒ‰ê°ì€?", choices:[
        { label:"ë°±ì˜¥/ì—°ë¶„í™/ë‹´ì²­ ë“± ì€ì€í•œ í†¤", value:"classic" },
        { label:"í¬ë¦¼/ëª¨ë…¸í†¤/íŒŒìŠ¤í…”ë¡œ ë°ì¼ë¦¬", value:"daily" },
        { label:"í™/ì²­/í™© ë“± ì„ ëª…í•œ ìƒì§•ìƒ‰", value:"ceremony" },
        { label:"ë„¤ì˜¨/ë°°ìƒ‰/íŒ¨í„´ ë¯¹ìŠ¤", value:"fusion" },
      ]},
      { id:4, title:"ì—¬í–‰ì§€ì—ì„œ í•œë³µì„ ì…ëŠ”ë‹¤ë©´?", choices:[
        { label:"ì „í†µ ëŒ€ì—¬ì ì—ì„œ ì •ì„ìœ¼ë¡œ", value:"classic" },
        { label:"ê°€ë²¼ìš´ ìƒí™œí•œë³µìœ¼ë¡œ ì´ë™ì„±â†‘", value:"daily" },
        { label:"í–‰ì‚¬/ê¸°ë…ì¼ ë§ì¶° ê²©ì‹ ìˆê²Œ", value:"ceremony" },
        { label:"ìŠ¤ë‹ˆì»¤ì¦ˆ/ë¹„ë‹ˆ ë“±ê³¼ ë¯¹ìŠ¤ë§¤ì¹˜", value:"fusion" },
      ]},
      { id:5, title:"ë‚˜ì˜ TPO(ì‹œê°„Â·ì¥ì†ŒÂ·ìƒí™©) ì„¼ìŠ¤ëŠ”?", choices:[
        { label:"í’ˆê²©ê³¼ ì „í†µë¯¸ ìš°ì„ ", value:"ceremony" },
        { label:"í™œë™ì„±ê³¼ ì‹¤ìš©ì„± ìµœìš°ì„ ", value:"daily" },
        { label:"ì¥ì†Œ ë¬´ë“œì— ë§ì¶˜ ê³ ì „ë¯¸", value:"classic" },
        { label:"ë£°ì€ ê°€ë³ê²Œ, ê°œì„± ìš°ì„ ", value:"fusion" },
      ]},
    ];

    const RESULTS = {
      classic:{ title:"ë‹¨ì•„í•œ ê³ ì „íŒŒ â€” ì •ê°ˆí•œ ì €ê³ ë¦¬ & ì¹˜ë§ˆ", emoji:"ğŸ•Šï¸",
        desc:"ì€ì€í•œ ìƒ‰ê³¼ ì ˆì œëœ ì‹¤ë£¨ì—£ì„ ì‚¬ë‘í•˜ëŠ” ë‹¹ì‹ ! ê¶ê³¼ ê³ íƒì—ì„œ ê°€ì¥ ë¹›ë‚˜ìš”. ê²¹ê²¹ì˜ ê²°ì´ ì£¼ëŠ” ë‹¨ì •í•¨ì´ ë‹¹ì‹ ì˜ ë¶„ìœ„ê¸°ë¥¼ ì™„ì„±í•©ë‹ˆë‹¤.",
        tips:["ì€ì€í•œ ìƒ‰ê°ì˜ ë°°ì/ëŒ•ê¸° í¬ì¸íŠ¸","ê³ íƒ/ì„œì› ë°°ê²½ì˜ ì‚¬ì§„ ìŠ¤íŒŸ","ê¸°ë³¸ ì˜ˆì ˆ/ë°œê±¸ìŒ(í’ˆ) ìì„¸ í•¨ê»˜ ì†Œê°œ"] },
      daily:{ title:"í¸ì•ˆí•œ ì¼ìƒíŒŒ â€” ìƒí™œí•œë³µ ëŸ¬ë²„", emoji:"ğŸŒ¿",
        desc:"ê°€ë³ê³  ì‹¤ìš©ì ì¸ ì†Œì¬, ëª¨ë…¸í†¤/íŒŒìŠ¤í…”ì„ ì¦ê¸°ëŠ” íƒ€ì…! ì¹´í˜/ë„ì‹¬ ì‚°ì±…ì— ì°°ë–¡ì´ë©° ëˆ„êµ¬ë‚˜ ì‰½ê²Œ ë„ì „í•  ìˆ˜ ìˆì–´ìš”.",
        tips:["ìŠ¤ë‹ˆì»¤ì¦ˆ/ìº”ë²„ìŠ¤ë°±ê³¼ ìì—°ìŠ¤ëŸ¬ìš´ ë§¤ì¹˜","ê³„ì ˆë³„ ì›ë‹¨(ë¦°ë„¨/ì½”íŠ¼) ì†Œê°œ","ì¶œí‡´ê·¼/ë“±êµ£ê¸¸ í•œë³µ ë°ì´ ì œì•ˆ"] },
      ceremony:{ title:"ê²©ì‹ì˜ ì•„ì´ì½˜ â€” ì˜ì‹Â·ì˜ˆë³µ ìŠ¤íƒ€ì¼", emoji:"ğŸ‘‘",
        desc:"ì˜ë¯¸ ìˆëŠ” ë‚ , ìƒì§• ìƒ‰ê³¼ ë””í…Œì¼ì„ ì¤‘ì‹œí•˜ëŠ” ë‹¹ì‹ . ì „í†µ ë¬¸ì–‘ê³¼ ìƒ‰ì˜ ìƒì§•ì„±ì„ ìŠ¤í† ë¦¬í…”ë§í•˜ë©´ ì™„ì„±ë„ê°€ ë†’ì•„ì ¸ìš”.",
        tips:["í–‰ì‚¬ë³„ í¬ë©€ TPO ê°€ì´ë“œ","ì „í†µ ë¬¸ì–‘/ìƒ‰ ì˜ë¯¸ ì¹´ë“œ","ê¸°ë…ì¼ ì‚¬ì§„ì²© í…œí”Œë¦¿ ê³µìœ "] },
      fusion:{ title:"ììœ ë¡œìš´ ë¯¹ì„œ â€” í“¨ì „Â·ìŠ¤íŠ¸ë¦¿ í•œë³µ", emoji:"âš¡",
        desc:"ë£°ì— ê°‡íˆì§€ ì•ŠëŠ” ì°½ì˜í˜•! ìŠ¤íŠ¸ë¦¿ ì•„ì´í…œê³¼ ë°°ìƒ‰/íŒ¨í„´ì„ ê³¼ê°íˆ ì¡°í•©í•´ ë‚˜ë§Œì˜ ë¬´ë“œë¥¼ ë§Œë“­ë‹ˆë‹¤.",
        tips:["ìŠ¤ëƒ…ë°±/ë¹„ë‹ˆ/ìŠ¤ë‹ˆì»¤ì¦ˆ ë§¤ì¹­ ê°€ì´ë“œ","ë°°ìƒ‰Â·ë ˆì´ì–´ë§ ì°¸ê³  ë£©ë¶","í•´ì‹œíƒœê·¸ #HanbokHeritage #StreetHanbok"] },
    };

    // ---- Logic ----
    function calcResult(answers){
      const score = { classic:0, daily:0, ceremony:0, fusion:0 };
      answers.forEach(a=> score[a] += 1);
      const entries = Object.entries(score).sort((a,b)=> b[1]-a[1]);
      const top = entries[0][1];
      const cands = entries.filter(([,v])=> v===top).map(([k])=>k);
      const order = ["daily","classic","fusion","ceremony"]; // tie-breaker
      for(const k of order){ if(cands.includes(k)) return k; }
      return entries[0][0];
    }

    function getResultFromURL(){
      const hash = location.hash || "";
      const m = /result=([a-z]+)/.exec(hash);
      const key = m && m[1];
      if(key && RESULTS[key]) return key;
      return null;
    }
    function setResultInURL(key){
      history.replaceState({}, "", `#result=${key}`);
    }
    function clearResultInURL(){
      history.replaceState({}, "", location.pathname);
    }

    function updateOgMeta(key){
      const titleBase = "Hanbok Heritage Quiz â€” í•œë³µ ì‹¬ë¦¬í…ŒìŠ¤íŠ¸";
      const descBase = "1ë¶„ ì‹¬ë¦¬í…ŒìŠ¤íŠ¸ë¡œ ë‚˜ì˜ í•œë³µ ìŠ¤íƒ€ì¼ì„ ì°¾ì•„ë³´ì! #HanbokHeritage";
      const title = key ? `${RESULTS[key].emoji} ${RESULTS[key].title} | ${titleBase}` : titleBase;
      const desc = key ? RESULTS[key].desc : descBase;
      document.title = title;
      setMeta("og:title", title); setMeta("og:description", desc); setMeta("description", desc);
    }
    function setMeta(prop, content){
      let el = document.querySelector(`meta[property='${prop}']`) || document.querySelector(`meta[name='${prop}']`);
      if(!el){ el = document.createElement('meta');
        if(prop.startsWith('og:')) el.setAttribute('property', prop); else el.setAttribute('name', prop);
        document.head.appendChild(el);
      }
      el.setAttribute('content', content);
    }

    // ---- UI ----
    const $root = document.getElementById('card');
    const state = { step:0, answers:[] };
    const total = QUESTIONS.length;

    function render(){
      const progress = Math.round((Math.min(state.step, total)/total)*100);
      const resultKey = (state.answers.length===total) ? calcResult(state.answers) : getResultFromURL();
      $root.innerHTML = '';

      if(state.step===0 && !resultKey){
        $root.append(introView());
      } else if(state.step>0 && state.step<=total){
        $root.append(questionView(progress));
      } else if(resultKey){
        $root.append(resultView(resultKey));
      }
    }

    function introView(){
      const wrap = el('div');
      wrap.append(el('div',{class:'title', text:'í•œë³µ, ì¼ìƒì—ì„œ ì¦ê²¨ë³´ê¸°'}));
      wrap.append(el('p',{class:'intro', html:'ì§§ì€ ë¬¸í•­ìœ¼ë¡œ ë‚˜ì˜ í•œë³µ ì·¨í–¥ì„ ì•Œì•„ë³´ê³ , ê²°ê³¼ ì¹´ë“œì™€ í•¨ê»˜ í•œ ì¤„ ì†Œê°œë¥¼ SNSì— ê³µìœ í•´ ë³´ì„¸ìš”. ì„¸ê³„ì¸ì„ í–¥í•œ ì‘ì€ ì°¸ì—¬ ìº í˜ì¸ <b>#HanbokHeritage</b>ì— ë™ì°¸í•  ìˆ˜ ìˆì–´ìš”.'}));
      const ul = el('ul',{class:'list'});
      ul.append(el('li',{text:'ì†Œìš” ì‹œê°„: 1ë¶„'}));
      ul.append(el('li',{text:'ê²°ê³¼: 4ê°€ì§€ íƒ€ì… ì¤‘ 1ê°œ (ë‹¨ì•„í•œ ê³ ì „íŒŒ / ìƒí™œí•œë³µ / ì˜ì‹ ì˜ˆë³µ / í“¨ì „ ìŠ¤íŠ¸ë¦¿)'}));
      ul.append(el('li',{text:'ê°œì¸ì •ë³´ ìˆ˜ì§‘ ì—†ìŒ, ê²°ê³¼ëŠ” ë¸Œë¼ìš°ì €ì—ë§Œ í‘œì‹œë©ë‹ˆë‹¤.'}));
      wrap.append(ul);
      wrap.append(el('div',{class:'space'}));
      const row = el('div',{class:'row'});
      row.append(button('ì‹œì‘í•˜ê¸° â–¶', ()=>{ state.step=1; render(); }));
      row.append(button('ë§í¬ ê³µìœ  ğŸ”—', ()=> share()));
      wrap.append(row);
      return wrap;
    }

    function questionView(progress){
      const idx = state.step-1;
      const q = QUESTIONS[idx];
      const wrap = el('div');
      wrap.append(el('div',{class:'title', text:`ë¬¸í•­ ${state.step} / ${total}`}));
      const prog = el('div',{class:'progress'}); const bar = el('div',{class:'bar'}); bar.style.width = progress+'%'; prog.append(bar); wrap.append(prog);
      wrap.append(el('p',{class:'intro', text:q.title, style:'margin-top:12px'}));
      const row = el('div',{class:'row', style:'margin-top:12px'});
      q.choices.forEach(c=> row.append(choice(c.label, ()=> handleChoice(c.value))));
      wrap.append(row);
      return wrap;
    }

    function resultView(key){
      updateOgMeta(key);
      const wrap = el('div');
      const card = el('div',{class:'result'});
      card.append(el('h3',{text:`${RESULTS[key].emoji} ${RESULTS[key].title}`}));
      card.append(el('p',{class:'intro', text:RESULTS[key].desc, style:'margin-top:8px'}));
      card.append(el('div',{class:'space'}));
      card.append(el('p',{class:'muted', text:'í™œìš© íŒ'}));
      const ul = el('ul',{class:'list'});
      RESULTS[key].tips.forEach(t=> ul.append(el('li',{text:t})));
      card.append(ul);
      card.append(el('div',{class:'space'}));

      const row = el('div',{class:'row'});
      row.append(button('ê²°ê³¼ ê³µìœ  ğŸ”—', ()=> share()));
      row.append(button('ë§í¬ ë³µì‚¬ ğŸ“‹', ()=> copyLinkSafe(shareUrl())));
      row.append(button('ë‹¤ì‹œ í•˜ê¸° â†©', ()=>{ state.step=0; state.answers=[]; clearResultInURL(); updateOgMeta(null); render(); }, 'secondary'));
      card.append(row);
      wrap.append(card);

      const tip = el('div',{class:'card', style:'margin-top:8px; padding:16px'});
      tip.append(el('p',{class:'muted', text:'ë” ì•Œì•„ë³´ê¸° ë¦¬ì†ŒìŠ¤(ë§í¬ êµì²´ ê°€ëŠ¥):'}));
      const l2 = el('ul',{class:'list'});
      l2.append(el('li',{text:'í•œë³µì˜ êµ¬ì„±ê³¼ ëª…ì¹­ ê°€ì´ë“œ (ë¸”ë¡œê·¸/ì¹´ë“œë‰´ìŠ¤ë¡œ ì—°ê²°)'}));
      l2.append(el('li',{text:'ìƒí™œí•œë³µ ë¸Œëœë“œ/ëŒ€ì—¬ì†Œ ëª¨ìŒ (ì§€ì—­Â·ì˜ˆì‚°ë³„)'}));
      l2.append(el('li',{text:'ì „í†µ ì˜ˆì ˆ/ì´¬ì˜ ë§¤ë„ˆ, ì¥ì†Œ ì´ìš© ì•ˆë‚´'}));
      tip.append(l2);
      wrap.append(tip);

      wrap.append(el('p',{class:'muted', text:'#HanbokHeritage #KHeritage â€” ì‘ì€ ì°¸ì—¬ê°€ ë¬¸í™”ë¥¼ ë„ë¦¬ ì•Œë¦½ë‹ˆë‹¤.', style:'text-align:center;margin-top:10px'}));
      return wrap;
    }

    function handleChoice(value){
      state.answers.push(value);
      if(state.step < total){ state.step += 1; }
      if(state.answers.length === total){
        const r = calcResult(state.answers);
        setResultInURL(r);
        state.step = total + 1;
      }
      render();
    }
// ìˆ˜ì •ëœ ì½”ë“œ
    function shareUrl(){
      const base = location.href.split('#')[0];
      const key = getResultFromURL();
      return key ? `${base}#result=${key}&utm_source=share` : base;
    }

    // Robust share/copy without assuming Clipboard permission
    function share(){
      const title = 'ë‚˜ëŠ” ì–´ë–¤ í•œë³µ ìŠ¤íƒ€ì¼ì¼ê¹Œ? â€” Hanbok Heritage Quiz';
      const key = getResultFromURL();
      const text = key ? \`ë‚´ íƒ€ì…ì€ "\${RESULTS[key].title}" (\${RESULTS[key].emoji})
#HanbokHeritage #KHeritage #í•œë³µ\` : 'í•œë³µ ì‹¬ë¦¬í…ŒìŠ¤íŠ¸ë¡œ ë‚´ ì·¨í–¥ì„ ì°¾ì•„ë³´ì„¸ìš”!';
      const url = shareUrl();
      // 1) Web Share API
      if (navigator.share){ navigator.share({title, text, url}).catch(()=>{}); return; }
      // 2) Clipboard API (may be blocked) â€” try/catch
      try{ if(navigator.clipboard){ navigator.clipboard.writeText(\`\${title}\n\${text}\n\${url}\`); console.log('[share] link copied:', url); return; } }catch(_){ /* ignore */ }
      // 3) execCommand fallback
      if(execCopy(\`\${title}\n\${text}\n\${url}\`)){ console.log('[share] copied via execCommand'); return; }
      // 4) Modal with selectable text
      openCopyModal(\`\${title}\n\${text}\n\${url}\`);
    }

    function copyLinkSafe(url){
      // Clipboard may be blocked â€” use same cascade
      if (navigator.share){ navigator.share({title:document.title, text:'Hanbok Heritage Quiz', url}).catch(()=>{}); return; }
      try{ if(navigator.clipboard){ navigator.clipboard.writeText(url); console.log('[copy] link copied:', url); return; } }catch(_){ }
      if(execCopy(url)){ console.log('[copy] via execCommand'); return; }
      openCopyModal(url);
    }

    function execCopy(text){
      try {
        const ta = document.createElement('textarea');
        ta.value = text; ta.setAttribute('readonly',''); ta.style.position='fixed'; ta.style.opacity='0';
        document.body.appendChild(ta); ta.select(); const ok = document.execCommand('copy');
        document.body.removeChild(ta); return ok;
      } catch(e){ return false; }
    }

    function openCopyModal(text){
      const modal = document.getElementById('copyModal');
      const box = document.getElementById('copyText');
      box.textContent = text;
      modal.classList.add('open');
      box.focus();
      const sel = window.getSelection(); const range = document.createRange();
      range.selectNodeContents(box); sel.removeAllRanges(); sel.addRange(range);
    }
    document.getElementById('closeModal').addEventListener('click', ()=>{
      document.getElementById('copyModal').classList.remove('open');
    });

    function el(tag, opts={}){
      const n = document.createElement(tag);
      if(opts.class) n.className = opts.class;
      if(opts.text) n.textContent = opts.text;
      if(opts.html) n.innerHTML = opts.html;
      if(opts.style) n.setAttribute('style', opts.style);
      return n;
    }
    function button(label, onClick, variant){
      const b = el('button', {class: 'btn' + (variant==='secondary' ? ' secondary':''), text: label});
      b.addEventListener('click', onClick);
      return b;
    }
    function choice(label, onClick){
      const b = el('button', {class:'choice', text:label});
      b.addEventListener('click', onClick); return b;
    }

    // Initialize
    document.getElementById('year').textContent = new Date().getFullYear();
    const fromUrl = getResultFromURL();
    if(fromUrl){ updateOgMeta(fromUrl); }
    render();

    // ---- Runtime tests (console) ----
    function runUnitTests(){
      const log = (name, pass)=> console[pass?'log':'error'](\`âœ…[test] \${name}: \${pass?'pass':'FAIL'}\`);
      // 1) majority
      log('majority classic', calcResult(['classic','classic','daily','fusion','classic'])==='classic');
      log('majority daily',   calcResult(['daily','daily','classic','fusion','ceremony'])==='daily');
      // 2) tie-breakers (daily > classic > fusion > ceremony)
      log('tie daily vs classic â†’ daily', calcResult(['classic','daily','classic','daily','fusion'])==='daily');
      log('tie fusion vs ceremony â†’ fusion', calcResult(['fusion','ceremony','fusion','ceremony','classic'])==='fusion');
      // 3) all-different â†’ daily by rule (using 4 answers)
      log('all 1 each â†’ daily', calcResult(['classic','daily','ceremony','fusion'])==='daily');
      // 4) URL helpers
      setResultInURL('daily');
      log('URL write/read daily', getResultFromURL()==='daily');
      clearResultInURL();
      log('URL cleared', getResultFromURL()===null);
    }
    try{ runUnitTests(); }catch(e){ /* ignore */ }
  </script>
</body>
</html>
